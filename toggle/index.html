<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="multiline.css">
    <script src="https://d3js.org/d3.v3.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <!--<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>-->
</head>
<body>
<p><a href="http://bl.ocks.org/asielen/44ffca2877d0132572cb">Reusable Responsive Multiline Chart</a></p>
<div id = "timeDropdown"></div>
<div class="chart-wrapper" id="chart-line1"></div>

<script type="text/javascript">
    var parseDate = d3.timeParse("%Y-%m-%d %H:%M:%S");

    //d3.csv('5k.csv', function(error, data) {
    d3.csv('https://dl.dropboxusercontent.com/s/cq0uq34zk3tvsep/5k.csv?dl=0', function(error, data) {
    console.log(data[1]);
    data.forEach(function (d) {
        d.Timestamp = parseDate(d.Timestamp);
        d.Depth = +d.Depth;
        d.Temperature = +d.Temperature;
        d.pH = +d.pH;
        d.Turbidity = +d.Turbidity;
    });
    console.log(data[1])
    var chart = makeLineChart(data, 'Timestamp', {
        'Temperature': {column: 'Temperature'},
        'Depth': {column: 'Depth'},
        'pH': {column: 'pH'},
        'Turbidity': {column: 'Turbidity'}
    }, {xAxis: 'Years', yAxis: 'Value'});
    chart.bind("#chart-line1");
    chart.render();

    var timeMenu = d3.select("#timeDropdown").append("select")
          .attr("name", "timeSelector");

    var timeoptions = [
        {"timeString": "3 hours", "hours": 3},
        {"timeString": "6 hours", "hours": 6},
        {"timeString": "12 hours", "hours": 12},
        {"timeString": "1 day", "hours": 24},
        {"timeString": "2 days", "hours": 2*24},
        {"timeString": "3 days", "hours": 3*24},
        {"timeString": "4 days", "hours": 4*24},
        {"timeString": "5 days", "hours": 5*24},
        {"timeString": "1 week", "hours": 7*24, "default": "selected"},
        {"timeString": "10 days", "hours": 10*24},
        {"timeString": "2 weeks", "hours": 14*24},
        {"timeString": "3 weeks", "hours": 21*24},
        {"timeString": "1 month", "hours": 31*24},
        {"timeString": "6 weeks", "hours": 6*7*24},
        {"timeString": "2 months", "hours": 2*31*24}
      ];

    var options = timeMenu.selectAll("option")
        .data(timeoptions)
        .enter()
        .append("option")
        .text(function (d) { return d.timeString; })
        .attr("value", function (d) { return d.hours; })
        .attr("selected", function (d) { return d.default; });

});
</script>
<script src="multiline.js" charset="utf-8"></script>
</body>
</html>
